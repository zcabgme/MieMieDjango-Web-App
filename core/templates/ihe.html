{% extends 'layouts/base.html' %}

{% block title %} Tables {% endblock title %}

{% block content %}

<!-- Header -->
<div class="header bg-gradient-primary pb-5 pt-5 pt-md-5">
    <div class="container-fluid">
        <div class="header-body">
            <!-- Card stats -->
            <div class="row">
                <div class="col-xl-4 col-lg-6">
                    <div class="card card-stats mb-4 mb-xl-0">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class="card-title text-uppercase text-muted mb-0">Publications Found</h5>
                                    <span class="h2 font-weight-bold mb-0">{{ len_pub }}</span>
                                </div>
                                <div class="col-auto">
                                    <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                                        <i class="fas fa-chart-bar"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Page description -->
<div class="header bg-gradient-primary pb-8 pt-5 pt-md-0">
    <div class="container-fluid">
        <div class="header-body">

            <!-- Card stats -->
            <div class="row">
                <div class="col-xl-12 col-lg-12">
                    <div class="card card-stats mb-4 mb-xl-0">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <span class="h2 font-weight-bold mb-0">Page Description</span>
                                </div>
                                <div class="col-auto">
                                    <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                                        <i class="fas fa-pen"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mt-3 mb-0 ">
                                <span class="text-wrap">
                                    Search for publications to see what IHE specialities they cover.
                                    The numbers shown are the percentage likelihood that the given publication falls under an IHE speciality, calculated by machine learning (LDA).
                                    If any of these values are above 30%, the publication\ is predicted to fall under that IHE speciality. This is shown in the 'Prediction' column.
                                    Click on the DOI links to see more about the publications.
                                </span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid mt--7">

    <!-- Search bar for modules & publications -->
    <form action="{% url 'ihe' %}" method="GET">
        <div class="form-group mb-0">
          <div class="input-group input-group-alternative">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fas fa-search"></i></span>
            </div>
            <input class="form-control" name="q" value="{{request.GET.q}}" placeholder="Search Publications" type="text">
            <select name="prediction" class="form-select" aria-label="Default select example">
                {% for opt, val in form.items %}
                    {% if val == "selected" %}
                        <option>{{ opt }}</option>
                    {% endif %}
                {% endfor %}
                {% for opt, val in form.items %}
                    {% if val == "unselected" %}
                        <option>{{ opt }}</option>
                    {% endif %}
                {% endfor %}
            </select>
        </div>
        </div>
      </form>

    <br><br><br>

    <!-- IHE Table -->
    <div class="row">
        <div class="col">
            <div class="card shadow">
                <div class="card-header border-0">
                </div>
                <div class="table-responsive">
                    <table class="table align-items-center table-flush">
                        <thead class="thead-light">
                            <tr>
                                <th scope="col">DOI</th>
                                <th></th>
                                <th title="AI & ML" scope="col">IHE 1</th>
                                <th title="Bioinformatics" scope="col">IHE 2</th>
                                <th title="Cybersecurity" scope="col">IHE 3</th>
                                <th title="Data Sciences" scope="col">IHE 4</th>
                                <th title="Software Engineering" scope="col">IHE 5</th>
                                <th title="Robotics" scope="col">IHE 6</th>
                                <th title="Synthetic Biology" scope="col">IHE 7</th>
                                <th title="Pharmacology & Pharmaceuticals" scope="col">IHE 8</th>
                                <th title="Tissue Engineering and Regenerative Medicine" scope="col">IHE 9</th>
                                <th scope="col">Prediction</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in ihes %}
                            <tr>
                                <td><a href="{{ item.get_absolute_url }}">{{ item.data.DOI|truncatechars:10 }}</a></td>
                                <td>LDA</td>
                                <td>{{ item.assignedSDG.IHE.0 }}</td>
                                <td>{{ item.assignedSDG.IHE.1 }}</td>
                                <td>{{ item.assignedSDG.IHE.2 }}</td>
                                <td>{{ item.assignedSDG.IHE.3 }}</td>
                                <td>{{ item.assignedSDG.IHE.4 }}</td>
                                <td>{{ item.assignedSDG.IHE.5 }}</td>
                                <td>{{ item.assignedSDG.IHE.6 }}</td>
                                <td>{{ item.assignedSDG.IHE.7 }}</td>
                                <td>{{ item.assignedSDG.IHE.8 }}</td>
                                <td>{{ item.assignedSDG.IHE_Prediction }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <!-- Pagination -->
                <div class="card-footer py-4">
                    <nav aria-label="...">
                        {% if ihes.has_other_pages %}
                        <ul class="pagination justify-content-end mb-0">
                            {% if ihes.has_previous %}
                            <li class="page-item">
                                <a class="page-link"
                                    href="?{{ url_string }}ihePage={{ 1 }}">
                                    <i class="fas fa-angle-double-left"></i>
                                    <span class="sr-only">First</span>
                                </a>
                            </li>
                            <li class="page-item">
                                <a class="page-link"
                                    href="?{{ url_string }}ihePage={{ ihes.previous_page_number }}">
                                    <i class="fas fa-angle-left"></i>
                                    <span class="sr-only">Previous</span>
                                </a>
                            </li>
                            {% endif %}
                            {% for i in ihes.paginator.page_range %}
                            {% if i <= ihes.number|add:5 and i >= ihes.number|add:-5 %}
                                {% if ihes.number == i %}
                                <li class="page-item active">
                                    <a class="page-link">{{ i }}</a>
                                </li>
                                {% else %}
                                <li class="page-item">
                                    <a class="page-link"
                                        href="?{{ url_string }}ihePage={{ i }}">{{ i }}</a>
                                </li>
                                {% endif %}
                                {% endif %}
                                {% endfor %}
                                {% if ihes.has_next %}
                                <li class="page-item">
                                    <a class="page-link"
                                        href="?{{ url_string }}ihePage={{ ihes.next_page_number }}">
                                        <i class="fas fa-angle-right"></i>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </li>
                                <li class="page-item">
                                    <a class="page-link"
                                        href="?{{ url_string }}ihePage={{ ihes.paginator.num_pages }}">
                                        <i class="fas fa-angle-double-right"></i>
                                        <span class="sr-only">Last</span>
                                    </a>
                                </li>
                                {% endif %}
                        </ul>
                        {% endif %}
                    </nav>
                </div>
            </div>
        </div>
    </div>


    <!-- Dark table -->
    {% comment %} <div class="row mt-5">
        <div class="col">
            <div class="card bg-default shadow">
                <div class="card-header bg-transparent border-0">
                    <h3 class="text-white mb-0">Card tables</h3>
                </div>
                <div class="table-responsive">
                    <table class="table align-items-center table-dark table-flush">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Project</th>
                                <th scope="col">Budget</th>
                                <th scope="col">Status</th>
                                <th scope="col">Users</th>
                                <th scope="col">Completion</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">
                                    <div class="media align-items-center">
                                        <a href="#" class="avatar rounded-circle mr-3">
                                            <img alt="Image placeholder" src="/static/assets/img/theme/bootstrap.jpg">
                                        </a>
                                        <div class="media-body">
                                            <span class="mb-0 text-sm">Argon Design System</span>
                                        </div>
                                    </div>
                                </th>
                                <td>
                                    $2,500 USD
                                </td>
                                <td>
                                    <span class="badge badge-dot mr-4">
                                        <i class="bg-warning"></i> pending
                                    </span>
                                </td>
                                <td>
                                    <div class="avatar-group">
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Ryan Tompson">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-1-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Romina Hadid">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-2-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Alexander Smith">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-3-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Jessica Doe">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-4-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="mr-2">60%</span>
                                        <div>
                                            <div class="progress">
                                                <div class="progress-bar bg-warning" role="progressbar"
                                                    aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
                                                    style="width: 60%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="text-right">
                                    <div class="dropdown">
                                        <a class="btn btn-sm btn-icon-only text-light" href="#" role="button"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                                            <a class="dropdown-item" href="#">Action</a>
                                            <a class="dropdown-item" href="#">Another action</a>
                                            <a class="dropdown-item" href="#">Something else here</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <div class="media align-items-center">
                                        <a href="#" class="avatar rounded-circle mr-3">
                                            <img alt="Image placeholder" src="/static/assets/img/theme/angular.jpg">
                                        </a>
                                        <div class="media-body">
                                            <span class="mb-0 text-sm">Angular Now UI Kit PRO</span>
                                        </div>
                                    </div>
                                </th>
                                <td>
                                    $1,800 USD
                                </td>
                                <td>
                                    <span class="badge badge-dot">
                                        <i class="bg-success"></i> completed
                                    </span>
                                </td>
                                <td>
                                    <div class="avatar-group">
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Ryan Tompson">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-1-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Romina Hadid">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-2-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Alexander Smith">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-3-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Jessica Doe">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-4-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="mr-2">100%</span>
                                        <div>
                                            <div class="progress">
                                                <div class="progress-bar bg-success" role="progressbar"
                                                    aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"
                                                    style="width: 100%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="text-right">
                                    <div class="dropdown">
                                        <a class="btn btn-sm btn-icon-only text-light" href="#" role="button"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                                            <a class="dropdown-item" href="#">Action</a>
                                            <a class="dropdown-item" href="#">Another action</a>
                                            <a class="dropdown-item" href="#">Something else here</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <div class="media align-items-center">
                                        <a href="#" class="avatar rounded-circle mr-3">
                                            <img alt="Image placeholder" src="/static/assets/img/theme/sketch.jpg">
                                        </a>
                                        <div class="media-body">
                                            <span class="mb-0 text-sm">Black Dashboard</span>
                                        </div>
                                    </div>
                                </th>
                                <td>
                                    $3,150 USD
                                </td>
                                <td>
                                    <span class="badge badge-dot mr-4">
                                        <i class="bg-danger"></i> delayed
                                    </span>
                                </td>
                                <td>
                                    <div class="avatar-group">
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Ryan Tompson">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-1-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Romina Hadid">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-2-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Alexander Smith">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-3-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Jessica Doe">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-4-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="mr-2">72%</span>
                                        <div>
                                            <div class="progress">
                                                <div class="progress-bar bg-danger" role="progressbar"
                                                    aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"
                                                    style="width: 72%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="text-right">
                                    <div class="dropdown">
                                        <a class="btn btn-sm btn-icon-only text-light" href="#" role="button"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                                            <a class="dropdown-item" href="#">Action</a>
                                            <a class="dropdown-item" href="#">Another action</a>
                                            <a class="dropdown-item" href="#">Something else here</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <div class="media align-items-center">
                                        <a href="#" class="avatar rounded-circle mr-3">
                                            <img alt="Image placeholder" src="/static/assets/img/theme/react.jpg">
                                        </a>
                                        <div class="media-body">
                                            <span class="mb-0 text-sm">React Material Dashboard</span>
                                        </div>
                                    </div>
                                </th>
                                <td>
                                    $4,400 USD
                                </td>
                                <td>
                                    <span class="badge badge-dot">
                                        <i class="bg-info"></i> on schedule
                                    </span>
                                </td>
                                <td>
                                    <div class="avatar-group">
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Ryan Tompson">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-1-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Romina Hadid">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-2-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Alexander Smith">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-3-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Jessica Doe">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-4-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="mr-2">90%</span>
                                        <div>
                                            <div class="progress">
                                                <div class="progress-bar bg-info" role="progressbar" aria-valuenow="90"
                                                    aria-valuemin="0" aria-valuemax="100" style="width: 90%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="text-right">
                                    <div class="dropdown">
                                        <a class="btn btn-sm btn-icon-only text-light" href="#" role="button"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                                            <a class="dropdown-item" href="#">Action</a>
                                            <a class="dropdown-item" href="#">Another action</a>
                                            <a class="dropdown-item" href="#">Something else here</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">
                                    <div class="media align-items-center">
                                        <a href="#" class="avatar rounded-circle mr-3">
                                            <img alt="Image placeholder" src="/static/assets/img/theme/vue.jpg">
                                        </a>
                                        <div class="media-body">
                                            <span class="mb-0 text-sm">Vue Paper UI Kit PRO</span>
                                        </div>
                                    </div>
                                </th>
                                <td>
                                    $2,200 USD
                                </td>
                                <td>
                                    <span class="badge badge-dot mr-4">
                                        <i class="bg-success"></i> completed
                                    </span>
                                </td>
                                <td>
                                    <div class="avatar-group">
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Ryan Tompson">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-1-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Romina Hadid">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-2-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Alexander Smith">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-3-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                        <a href="#" class="avatar avatar-sm" data-toggle="tooltip"
                                            data-original-title="Jessica Doe">
                                            <img alt="Image placeholder"
                                                src="/static/assets/img/theme/team-4-800x800.jpg"
                                                class="rounded-circle">
                                        </a>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="mr-2">100%</span>
                                        <div>
                                            <div class="progress">
                                                <div class="progress-bar bg-success" role="progressbar"
                                                    aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"
                                                    style="width: 100%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="text-right">
                                    <div class="dropdown">
                                        <a class="btn btn-sm btn-icon-only text-light" href="#" role="button"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-ellipsis-v"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                                            <a class="dropdown-item" href="#">Action</a>
                                            <a class="dropdown-item" href="#">Another action</a>
                                            <a class="dropdown-item" href="#">Something else here</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div> {% endcomment %}


    {% include "includes/footer.html" %}
</div>

{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}{% endblock javascripts %}